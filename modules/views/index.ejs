<%- include("partials/header") %>
<%- include("partials/sidebar") %>

<h1 class="title">Employee Dashboard</h1>

<!-- STATS CARDS -->

<div class="cards">

    <div class="card">
        <h3>Total Employees</h3>
        <p><%= totalEmployees %></p>
    </div>

    <div class="card">
        <h3>Total Payroll</h3>
        <p>₹ <%= totalPayroll %></p>
    </div>

    <div class="card">
        <h3>Average Salary</h3>
        <p>₹ <%= avgSalary %></p>
    </div>

    <div class="card">
        <h3>Highest Salary</h3>
        <p>₹ <%= highestSalary %></p>
    </div>

</div>



<!-- TABLE -->

<div class="table-card">

<table>

<thead>
<tr>
<th>Name</th>
<th>Department</th>
<th>Basic</th>
<th>Tax</th>
<th>Net</th>
<th>Actions</th>
</tr>
</thead>

<tbody>

<% employees.forEach(emp => { 
const tax = emp.basicSalary * 0.12;
const net = emp.basicSalary - tax;
%>

<tr>
<td><%= emp.name %></td>
<td><%= emp.department %></td>
<td class="salary">₹ <%= emp.basicSalary %></td>
<td class="tax">₹ <%= tax.toFixed(0) %></td>
<td class="net">₹ <%= net.toFixed(0) %></td>

<td>
<a href="/edit/<%= emp.id %>" class="btn-edit">Edit</a>

<a href="/delete/<%= emp.id %>"
class="btn-delete"
onclick="return confirm('Delete employee?')">
Delete
</a>
</td>

</tr>

<% }) %>

</tbody>

</table>

</div>

<%- include("partials/footer") %>
